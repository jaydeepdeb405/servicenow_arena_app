<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_transform_script">
    <sys_transform_script action="INSERT_OR_UPDATE">
        <active>true</active>
        <map display_value="Test Question Map (A, B, C, D)">4ee85f562f3a341066625e972799b604</map>
        <order>100</order>
        <script><![CDATA[(function runTransformScript(source, map, log, target /*undefined onStart*/ ) {

    var correctAnswerKeys = source.u_answer.toString().trim().split(' ');
	
    source.u_choices.toString().split('\n').forEach(function(choiceVal) {
		choiceVal = choiceVal.trim();
        var optionMatch = choiceVal.match(/^[A-Z]/);
		var isCorrect = optionMatch instanceof Array && optionMatch.length > 0 &&
			correctAnswerKeys.indexOf(optionMatch[0]) > -1;
        var match = choiceVal.match(/^[A-Z].\s*(.*)$/);
        if (match instanceof Array && match.length > 1) {
            var choices = new GlideRecord('x_93700_arena_quiz_choices');
            choices.initialize();
            choices.question = target.sys_id;
            choices.choice = match[1];
            choices.correct = isCorrect;
			choices.insert();
        }
    });

})(source, map, log, target);]]></script>
        <sys_class_name>sys_transform_script</sys_class_name>
        <sys_created_by>jaydeepdeb</sys_created_by>
        <sys_created_on>2021-09-27 08:16:09</sys_created_on>
        <sys_id>8f3a971a2f3a341066625e972799b657</sys_id>
        <sys_mod_count>2</sys_mod_count>
        <sys_name>onAfter</sys_name>
        <sys_package display_value="Arena" source="x_93700_arena">661460dfdbc5c010b6db8e47489619ae</sys_package>
        <sys_policy/>
        <sys_scope display_value="Arena">661460dfdbc5c010b6db8e47489619ae</sys_scope>
        <sys_update_name>sys_transform_script_8f3a971a2f3a341066625e972799b657</sys_update_name>
        <sys_updated_by>jaydeepdeb</sys_updated_by>
        <sys_updated_on>2021-09-27 08:29:45</sys_updated_on>
        <when>onAfter</when>
    </sys_transform_script>
</record_update>
